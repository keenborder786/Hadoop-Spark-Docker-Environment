version: "3.7"
services:
  namenode:
    build:
      context: ./hadoop
    ports: 
        - "9870:9870"
        - "8088:8088"
    command: > 
      bash -c "hdfs --daemon start namenode & yarn --daemon start resourcemanager & tail -f /dev/null"
    hostname: hdfs-namenode

  datanode:
    build:
      context: ./hadoop
    hostname: datanode
    depends_on: 
        - namenode
    command: >
      bash -c "hdfs --daemon start datanode & yarn --daemon start nodemanager & tail -f /dev/null"
    ports:
      - "9864:9864"


  secondarynamenode:
    build:
      context: ./hadoop
    command: bash -c "hdfs --daemon start secondarynamenode & tail -f /dev/null"
    ports:
        - "9868:9868"